<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="shop">
	<resultMap type="brand" id="brandMap">
   		<result column="brand_no" property="brandNo"/>
   		<result column="brand_title" property="brandTitle"/>	
   		<result column="brand_license" property="brandLicense"/>	
   		<result column="brand_type" property="brandType"/>	
   		<result column="brand_addr" property="brandAddr"/>	
   		<result column="brand_detailAddr" property="brandDetailAddr"/>	
   		<result column="brand_enrollDate" property="brandEnrollDate"/>		
   		<result column="brand_state" property="brandState"/>
   		<result column="member_no" property="memberNo"/>
	</resultMap>
	<resultMap type="BigCategory" id="bcMap">
		<result column="bc_no" property="bcNo"/>
   		<result column="bc_title" property="bcTitle"/>
	</resultMap>
	<resultMap type="SmallCategory" id="scMap">
		<result column="sc_no" property="scNo"/>
   		<result column="sc_title" property="scTitle"/>
   		<result column="bc_no" property="bcNo"/>
	</resultMap>
	
	<select id="selectBrandList" resultMap="brandMap" parameterType="string">
		SELECT * FROM BRAND WHERE MEMBER_NO = #{memberNo}	
	</select>
	<insert id="insertBrand" parameterType="map">
		INSERT INTO BRAND VALUES('B_NO_'||SEQ_BRAND_NO.nextval, 
		#{brandTitle}, #{brandLicense}, #{brandType}, #{brandAddr}, #{brandDetailAddr}, DEFAULT, 0, #{memberNo})
	</insert>
	<select id="selectBrand" parameterType="string" resultMap="brandMap">
		SELECT * FROM BRAND WHERE BRAND_NO = #{brandNo}
	</select>
	<insert id="insertPreProduct" parameterType="map">
		INSERT INTO PRE_PRODUCT VALUES('PRE_P_NO_'||SEQ_PRE_PRODUCT_NO.nextval,
		#{preProductTitle}, #{preProductDiscript}, 0, DEFAULT, #{brandNo}, #{bcNo}, #{scNo})
	</insert>
	<select id="selectBcList" resultMap="bcMap">
		SELECT * FROM BIG_CATEGORY
	</select>
	<select id="selectScList" resultMap="scMap" parameterType="string">
		SELECT * FROM SMALL_CATEGORY WHERE BC_NO = #{bcNo}
	</select>
	<update id="updateBrand" parameterType="map">
		UPDATE BRAND SET BRAND_ADDR = #{brandAddr}, BRAND_DETAILADDR = #{brandDetailAddr}, BRAND_TYPE = #{brandType}, BRAND_STATE = 0
		WHERE BRAND_NO = #{brandNo}
	</update>
</mapper>
